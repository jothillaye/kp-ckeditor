/*
 Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 For licensing, see LICENSE.md or http://ckeditor.com/license
*/
CKEDITOR.event||(CKEDITOR.event=function(){},CKEDITOR.event.implementOn=function(l){var h=CKEDITOR.event.prototype,d;for(d in h)null==l[d]&&(l[d]=h[d])},CKEDITOR.event.prototype=function(){function l(a){var b=h(this);return b[a]||(b[a]=new d(a))}var h=function(a){a=a.getPrivate&&a.getPrivate()||a._||(a._={});return a.events||(a.events={})},d=function(a){this.name=a;this.listeners=[]};d.prototype={getListenerIndex:function(a){for(var b=0,c=this.listeners;b<c.length;b++)if(c[b].fn==a)return b;return-1}};
return{define:function(a,b){var c=l.call(this,a);CKEDITOR.tools.extend(c,b,!0)},on:function(a,b,c,h,k){function e(e,f,g,k){e={name:a,sender:this,editor:e,data:f,listenerData:h,stop:g,cancel:k,removeListener:d};return!1===b.call(c,e)?!1:e.data}function d(){p.removeListener(a,b)}var f=l.call(this,a);if(0>f.getListenerIndex(b)){f=f.listeners;c||(c=this);isNaN(k)&&(k=10);var p=this;e.fn=b;e.priority=k;for(var g=f.length-1;0<=g;g--)if(f[g].priority<=k)return f.splice(g+1,0,e),{removeListener:d};f.unshift(e)}return{removeListener:d}},
once:function(){var a=Array.prototype.slice.call(arguments),b=a[1];a[1]=function(a){a.removeListener();return b.apply(this,arguments)};return this.on.apply(this,a)},capture:function(){CKEDITOR.event.useCapture=1;var a=this.on.apply(this,arguments);CKEDITOR.event.useCapture=0;return a},fire:function(){var a=0,b=function(){a=1},c=0,d=function(){c=1};return function(k,e,l){var f=h(this)[k];k=a;var p=c;a=c=0;if(f){var g=f.listeners;if(g.length)for(var g=g.slice(0),m,n=0;n<g.length;n++){if(f.errorProof)try{m=
g[n].call(this,l,e,b,d)}catch(q){}else m=g[n].call(this,l,e,b,d);!1===m?c=1:"undefined"!=typeof m&&(e=m);if(a||c)break}}e=c?!1:"undefined"==typeof e?!0:e;a=k;c=p;return e}}(),fireOnce:function(a,b,c){b=this.fire(a,b,c);delete h(this)[a];return b},removeListener:function(a,b){var c=h(this)[a];if(c){var d=c.getListenerIndex(b);0<=d&&c.listeners.splice(d,1)}},removeAllListeners:function(){var a=h(this),b;for(b in a)delete a[b]},hasListeners:function(a){return(a=h(this)[a])&&0<a.listeners.length}}}());