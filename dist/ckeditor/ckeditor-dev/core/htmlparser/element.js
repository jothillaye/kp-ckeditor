/*
 Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 For licensing, see LICENSE.md or http://ckeditor.com/license
*/
CKEDITOR.htmlParser.element=function(d,g){this.name=d;this.attributes=g||{};this.children=[];var c=d||"",a=c.match(/^cke:(.*)/);a&&(c=a[1]);c=!!(CKEDITOR.dtd.$nonBodyContent[c]||CKEDITOR.dtd.$block[c]||CKEDITOR.dtd.$listItem[c]||CKEDITOR.dtd.$tableContent[c]||CKEDITOR.dtd.$nonEditable[c]||"br"==c);this.isEmpty=!!CKEDITOR.dtd.$empty[d];this.isUnknown=!CKEDITOR.dtd[d];this._={isBlockLike:c,hasInlineStarted:this.isEmpty||!c}};
CKEDITOR.htmlParser.cssStyle=function(d){var g={};((d instanceof CKEDITOR.htmlParser.element?d.attributes.style:d)||"").replace(/&quot;/g,'"').replace(/\s*([^ :;]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(c,a,b){"font-family"==a&&(b=b.replace(/["']/g,""));g[a.toLowerCase()]=b});return{rules:g,populate:function(c){var a=this.toString();a&&(c instanceof CKEDITOR.dom.element?c.setAttribute("style",a):c instanceof CKEDITOR.htmlParser.element?c.attributes.style=a:c.style=a)},toString:function(){var c=[],a;
for(a in g)g[a]&&c.push(a,":",g[a],";");return c.join("")}}};
(function(){function d(a){return function(b){return b.type==CKEDITOR.NODE_ELEMENT&&("string"==typeof a?b.name==a:b.name in a)}}var g=function(a,b){a=a[0];b=b[0];return a<b?-1:a>b?1:0},c=CKEDITOR.htmlParser.fragment.prototype;CKEDITOR.htmlParser.element.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_ELEMENT,add:c.add,clone:function(){return new CKEDITOR.htmlParser.element(this.name,this.attributes)},filter:function(a,b){var e=this,c,f;b=e.getFilterContext(b);if(b.off)return!0;
if(!e.parent)a.onRoot(b,e);for(;;){c=e.name;if(!(f=a.onElementName(b,c)))return this.remove(),!1;e.name=f;if(!(e=a.onElement(b,e)))return this.remove(),!1;if(e!==this)return this.replaceWith(e),!1;if(e.name==c)break;if(e.type!=CKEDITOR.NODE_ELEMENT)return this.replaceWith(e),!1;if(!e.name)return this.replaceWithChildren(),!1}c=e.attributes;var h,d;for(h in c){for(f=c[h];;)if(d=a.onAttributeName(b,h))if(d!=h)delete c[h],h=d;else break;else{delete c[h];break}d&&(!1===(f=a.onAttribute(b,e,d,f))?delete c[d]:
c[d]=f)}e.isEmpty||this.filterChildren(a,!1,b);return!0},filterChildren:c.filterChildren,writeHtml:function(a,b){b&&this.filter(b);var e=this.name,c=[],f=this.attributes,d,k;a.openTag(e,f);for(d in f)c.push([d,f[d]]);a.sortAttributes&&c.sort(g);d=0;for(k=c.length;d<k;d++)f=c[d],a.attribute(f[0],f[1]);a.openTagClose(e,this.isEmpty);this.writeChildrenHtml(a);this.isEmpty||a.closeTag(e)},writeChildrenHtml:c.writeChildrenHtml,replaceWithChildren:function(){for(var a=this.children,b=a.length;b;)a[--b].insertAfter(this);
this.remove()},forEach:c.forEach,getFirst:function(a){if(!a)return this.children.length?this.children[0]:null;"function"!=typeof a&&(a=d(a));for(var b=0,c=this.children.length;b<c;++b)if(a(this.children[b]))return this.children[b];return null},getHtml:function(){var a=new CKEDITOR.htmlParser.basicWriter;this.writeChildrenHtml(a);return a.getHtml()},setHtml:function(a){a=this.children=CKEDITOR.htmlParser.fragment.fromHtml(a).children;for(var b=0,c=a.length;b<c;++b)a[b].parent=this},getOuterHtml:function(){var a=
new CKEDITOR.htmlParser.basicWriter;this.writeHtml(a);return a.getHtml()},split:function(a){for(var b=this.children.splice(a,this.children.length-a),c=this.clone(),d=0;d<b.length;++d)b[d].parent=c;c.children=b;b[0]&&(b[0].previous=null);0<a&&(this.children[a-1].next=null);this.parent.add(c,this.getIndex()+1);return c},find:function(a,b){void 0===b&&(b=!1);var c=[],d;for(d=0;d<this.children.length;d++){var f=this.children[d];"function"==typeof a&&a(f)?c.push(f):"string"==typeof a&&f.name===a&&c.push(f);
b&&f.find&&(c=c.concat(f.find(a,b)))}return c},addClass:function(a){if(!this.hasClass(a)){var b=this.attributes["class"]||"";this.attributes["class"]=b+(b?" ":"")+a}},removeClass:function(a){var b=this.attributes["class"];b&&((b=CKEDITOR.tools.trim(b.replace(new RegExp("(?:\\s+|^)"+a+"(?:\\s+|$)")," ")))?this.attributes["class"]=b:delete this.attributes["class"])},hasClass:function(a){var b=this.attributes["class"];return b?(new RegExp("(?:^|\\s)"+a+"(?\x3d\\s|$)")).test(b):!1},getFilterContext:function(a){var b=
[];a||(a={off:!1,nonEditable:!1,nestedEditable:!1});a.off||"off"!=this.attributes["data-cke-processor"]||b.push("off",!0);a.nonEditable||"false"!=this.attributes.contenteditable?a.nonEditable&&!a.nestedEditable&&"true"==this.attributes.contenteditable&&b.push("nestedEditable",!0):b.push("nonEditable",!0);if(b.length){a=CKEDITOR.tools.copy(a);for(var c=0;c<b.length;c+=2)a[b[c]]=b[c+1]}return a}},!0)})();