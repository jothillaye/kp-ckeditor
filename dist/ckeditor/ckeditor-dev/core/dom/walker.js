/*
 Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.
 For licensing, see LICENSE.md or http://ckeditor.com/license
*/
(function(){function f(c,b){var d=this.range;if(this._.end)return null;if(!this._.start){this._.start=1;if(d.collapsed)return this.end(),null;d.optimize()}var a,e=d.startContainer;a=d.endContainer;var q=d.startOffset,f=d.endOffset,g,h=this.guard,m=this.type,k=c?"getPreviousSourceNode":"getNextSourceNode";if(!c&&!this._.guardLTR){var n=a.type==CKEDITOR.NODE_ELEMENT?a:a.getParent(),l=a.type==CKEDITOR.NODE_ELEMENT?a.getChild(f):a.getNext();this._.guardLTR=function(a,b){return(!b||!n.equals(a))&&(!l||
!a.equals(l))&&(a.type!=CKEDITOR.NODE_ELEMENT||!b||!a.equals(d.root))}}if(c&&!this._.guardRTL){var p=e.type==CKEDITOR.NODE_ELEMENT?e:e.getParent(),r=e.type==CKEDITOR.NODE_ELEMENT?q?e.getChild(q-1):null:e.getPrevious();this._.guardRTL=function(a,b){return(!b||!p.equals(a))&&(!r||!a.equals(r))&&(a.type!=CKEDITOR.NODE_ELEMENT||!b||!a.equals(d.root))}}var t=c?this._.guardRTL:this._.guardLTR;g=h?function(a,b){return!1===t(a,b)?!1:h(a,b)}:t;this.current?a=this.current[k](!1,m,g):(c?a.type==CKEDITOR.NODE_ELEMENT&&
(a=0<f?a.getChild(f-1):!1===g(a,!0)?null:a.getPreviousSourceNode(!0,m,g)):(a=e,a.type==CKEDITOR.NODE_ELEMENT&&((a=a.getChild(q))||(a=!1===g(e,!0)?null:e.getNextSourceNode(!0,m,g)))),a&&!1===g(a)&&(a=null));for(;a&&!this._.end;){this.current=a;if(!this.evaluator||!1!==this.evaluator(a)){if(!b)return a}else if(b&&this.evaluator)return!1;a=a[k](!1,m,g)}this.end();return this.current=null}function n(c){for(var b,d=null;b=f.call(this,c);)d=b;return d}CKEDITOR.dom.walker=CKEDITOR.tools.createClass({$:function(c){this.range=
c;this._={}},proto:{end:function(){this._.end=1},next:function(){return f.call(this)},previous:function(){return f.call(this,1)},checkForward:function(){return!1!==f.call(this,0,1)},checkBackward:function(){return!1!==f.call(this,1,1)},lastForward:function(){return n.call(this)},lastBackward:function(){return n.call(this,1)},reset:function(){delete this.current;this._={}}}});var u={block:1,"list-item":1,table:1,"table-row-group":1,"table-header-group":1,"table-footer-group":1,"table-row":1,"table-column-group":1,
"table-column":1,"table-cell":1,"table-caption":1},v={absolute:1,fixed:1};CKEDITOR.dom.element.prototype.isBlockBoundary=function(c){return"none"!=this.getComputedStyle("float")||this.getComputedStyle("position")in v||!u[this.getComputedStyle("display")]?!!(this.is(CKEDITOR.dtd.$block)||c&&this.is(c)):!0};CKEDITOR.dom.walker.blockBoundary=function(c){return function(b){return!(b.type==CKEDITOR.NODE_ELEMENT&&b.isBlockBoundary(c))}};CKEDITOR.dom.walker.listItemBoundary=function(){return this.blockBoundary({br:1})};
CKEDITOR.dom.walker.bookmark=function(c,b){function d(a){return a&&a.getName&&"span"==a.getName()&&a.data("cke-bookmark")}return function(a){var e,f;e=a&&a.type!=CKEDITOR.NODE_ELEMENT&&(f=a.getParent())&&d(f);e=c?e:e||d(a);return!!(b^e)}};CKEDITOR.dom.walker.whitespaces=function(c){return function(b){var d;b&&b.type==CKEDITOR.NODE_TEXT&&(d=!CKEDITOR.tools.trim(b.getText())||CKEDITOR.env.webkit&&b.getText()==CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE);return!!(c^d)}};CKEDITOR.dom.walker.invisible=
function(c){var b=CKEDITOR.dom.walker.whitespaces(),d=CKEDITOR.env.webkit?1:0;return function(a){b(a)?a=1:(a.type==CKEDITOR.NODE_TEXT&&(a=a.getParent()),a=a.$.offsetWidth<=d);return!!(c^a)}};CKEDITOR.dom.walker.nodeType=function(c,b){return function(d){return!!(b^d.type==c)}};CKEDITOR.dom.walker.bogus=function(c){function b(b){return!h(b)&&!k(b)}return function(d){var a=CKEDITOR.env.needsBrFiller?d.is&&d.is("br"):d.getText&&l.test(d.getText());a&&(a=d.getParent(),d=d.getNext(b),a=a.isBlockBoundary()&&
(!d||d.type==CKEDITOR.NODE_ELEMENT&&d.isBlockBoundary()));return!!(c^a)}};CKEDITOR.dom.walker.temp=function(c){return function(b){b.type!=CKEDITOR.NODE_ELEMENT&&(b=b.getParent());b=b&&b.hasAttribute("data-cke-temp");return!!(c^b)}};var l=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,h=CKEDITOR.dom.walker.whitespaces(),k=CKEDITOR.dom.walker.bookmark(),w=CKEDITOR.dom.walker.temp(),x=function(c){return k(c)||h(c)||c.type==CKEDITOR.NODE_ELEMENT&&c.is(CKEDITOR.dtd.$inline)&&!c.is(CKEDITOR.dtd.$empty)};CKEDITOR.dom.walker.ignored=
function(c){return function(b){b=h(b)||k(b)||w(b);return!!(c^b)}};var p=CKEDITOR.dom.walker.ignored();CKEDITOR.dom.walker.empty=function(c){return function(b){for(var d=0,a=b.getChildCount();d<a;++d)if(!p(b.getChild(d)))return!!c;return!c}};var y=CKEDITOR.dom.walker.empty(),z=CKEDITOR.dom.walker.validEmptyBlockContainers=CKEDITOR.tools.extend(function(c){var b={},d;for(d in c)CKEDITOR.dtd[d]["#"]&&(b[d]=1);return b}(CKEDITOR.dtd.$block),{caption:1,td:1,th:1});CKEDITOR.dom.walker.editable=function(c){return function(b){b=
p(b)?!1:b.type==CKEDITOR.NODE_TEXT||b.type==CKEDITOR.NODE_ELEMENT&&(b.is(CKEDITOR.dtd.$inline)||b.is("hr")||"false"==b.getAttribute("contenteditable")||!CKEDITOR.env.needsBrFiller&&b.is(z)&&y(b))?!0:!1;return!!(c^b)}};CKEDITOR.dom.element.prototype.getBogus=function(){var c=this;do c=c.getPreviousSourceNode();while(x(c));return c&&(CKEDITOR.env.needsBrFiller?c.is&&c.is("br"):c.getText&&l.test(c.getText()))?c:!1}})();